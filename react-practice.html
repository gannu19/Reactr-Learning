<!DOCTYPE html>
<html>
  <head>
    <title>React with Babel</title>
    <style>
      body{
        font-family:Aerial;
      }
       .send-button{
        background-color: green;
        color:white;
        padding: 12px 20px;
        margin-left: 10px;
        border:none;
        border-radius:10px;
        font-size:15px;
        cursor: pointer;
      }
      .input-element{
        padding:12px 15px;
        border-radius: 10px;
        border-width: 1px;
        font-size: 15px;
        width:350px;

        flex-grow:1;
      }
      .chat-input-container{
        display: flex;
      }
      .App.container{
        max-width: 600px;
        margin-left:auto;
        margin-right:auto;
      }
      .chat-message-user{
        display: flex;
        justify-content:end ;
        align-items:start;
      }
      .chat-message-text{
        background-color: rgb(238,238,238);
        padding:15px 20px;
        margin-right:10px;
        margin-right:10px;
        margin-left:10px;
        margin-bottom:20px;
        max-width:300px;
        border-radius:10px;
       

      }
      .chat-message-chatbot{
        display:flex;
        border-radius:10px;
        
        
      }
      .image-user{
        width:50px;

      }
      .image-chatbot{
        width:50px;
      }

    </style>
  </head>
  <body>
    <div class="js-container"></div>

    <!-- React 18 CDN -->
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>

    <!-- Babel CDN -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- JSX Code -->
     <!---->
    <script type="text/babel">


      function ChatInput({onSend}){
        const [inputText, setInputText] = React.useState("");

        function SaveInputText(event){
          setInputText(event.target.value);

        }

        function sendMessage(){
         onSend(inputText);
         setInputText("");
        }

  
        return (
          <div className = "chat-input-container">
          <input placeholder =" Say Something...?" className="input-element" onChange={SaveInputText} width="70" />
          <button className="send-button" onClick={sendMessage}>Send</button>
          </div>
        )
      }

//Main logic for rednering the messages and image will appear based on the sender type 

      function ChatMessages(props){
        const {message, sender:from} = props;
        return (
          <div>         
          {from === "user" && <img src="user.png" className="image-user" />}
           <div className="chat-message-text">{message}</div>
          { from === "Chatbot" && <img src="chatbot.png" className="image-chatbot" />}

          </div>
        )
      }

//Function for all the chat messages and if any new message to be added will be added in this function
      function ChatMessagesList(){    
        const [MessageList, setMessageList] = React.useState([

          {message:"Hello! How can I help You ?", sender:"Chatbot"},
          {message:"Hello! Can you get todays date?", sender:"user"},
          {message:"sure, Today is February 28 ! Is there anything I can help with you!", sender:"Chatbot"},
          {message:"Can You give me todays day and present temperature?", sender:"user"},
          {message:"Today is Saturday, weekend so enjoy you day and the temperature is 30 degrees", sender:"Chatbot"},
          {message:"Thank You!", sender:"user"},
          {message:"Thankn you! Is there anything that I help with?", sender:"Chatbot"}
       ]
      
        )

        function AddMessage(text){
          const newMsg ={message:text, sender:"user"}
          setMessageList([...MessageList, newMsg])
        }

        return (
          <>
          <ChatInput onSend={AddMessage} />
          {
          MessageList.map((msg)=>(
            <div  className={ msg.sender==="user" ? "chat-message-user" : "chat-message-chatbot"}>          
            <ChatMessages 
              key={crypto.randomUUID()}
              message={msg.message}
              sender={msg.sender}
            />
            </div>
          ))
        }

          </>
        )

      }
//This will render the final UI 
      function App(){       
        return (
        <div className="App-container">   
        <ChatMessagesList />
        </div>
       )
      }

//creates a container and rendering      
     const container = document.querySelector('.js-container');
      const root = ReactDOM.createRoot(container);
      root.render(<App />);
    </script>
    
  </body>
</html>